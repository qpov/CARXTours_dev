{"ast":null,"code":"import _slicedToArray from\"A:/CARXTours/site/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link}from\"react-router-dom\";import'../css/loginAndRegister.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isAdded=_useState8[0],setIsAdded=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isVisible=_useState10[0],setIsVisible=_useState10[1];var handleSubmit=function handleSubmit(event){event.preventDefault();fetch('http://45.10.110.89/api/auth/register/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})}).then(function(response){if(!response.ok){throw response;}return response.json();}).then(function(data){console.log('Success:',data);window.location.href='/login';}).catch(function(error){console.error('Error:',error);if(error.status===400){setError('Данное имя пользователя уже занято');setIsAdded(true);setTimeout(function(){return setIsVisible(true);},100);// задержка для плавного появления ошибки\nsetTimeout(function(){setIsVisible(false);setTimeout(function(){setError(null);setIsAdded(false);},1000);// задержка для плавного исчезновения ошибки\n},5000);// время показа ошибки\n}});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"registerPage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"containerRegisterText\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"containerLoginBack\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"containerRegisterAuth\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"p\",{className:\"containerRegisterTextUsername\",children:\"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{value:username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{className:\"containerRegisterTextPassword\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonContainer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u043E\\u0441\\u043B\\u0435 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438 \\u043D\\u0443\\u0436\\u043D\\u043E \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"errorMessageContainer\",children:isAdded&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage \".concat(isVisible?'visible':''),children:error})})]})]})})});}","map":{"version":3,"names":["React","useState","Link","jsx","_jsx","jsxs","_jsxs","Register","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","error","setError","_useState7","_useState8","isAdded","setIsAdded","_useState9","_useState10","isVisible","setIsVisible","handleSubmit","event","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","ok","json","data","console","log","window","location","href","catch","status","setTimeout","children","className","to","onSubmit","value","onChange","e","target","type","concat"],"sources":["A:/CARXTours/site/frontend/src/pages/Register.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport '../css/loginAndRegister.css';\r\n\r\nexport default function Register() {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState(null);\r\n\r\n  const [isAdded, setIsAdded] = useState(false);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    fetch('http://45.10.110.89/api/auth/register/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        username: username,\r\n        password: password,\r\n      }),\r\n    })\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw response;\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(data => {\r\n      console.log('Success:', data);\r\n      window.location.href = '/login';\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error:', error);\r\n      if (error.status === 400) {\r\n        setError('Данное имя пользователя уже занято');\r\n        setIsAdded(true);\r\n        setTimeout(() => setIsVisible(true), 100); // задержка для плавного появления ошибки\r\n        setTimeout(() => {\r\n          setIsVisible(false);\r\n          setTimeout(() => {\r\n            setError(null);\r\n            setIsAdded(false);\r\n          }, 1000); // задержка для плавного исчезновения ошибки\r\n        }, 5000); // время показа ошибки\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className='registerPage'>\r\n\r\n        <div className='containerRegisterText'>\r\n          <div className='containerLoginBack'>\r\n            <Link to='/login'>Назад</Link>\r\n          </div>\r\n          <div className='containerRegisterAuth'>\r\n            Регистрация\r\n          </div>\r\n          <form onSubmit={handleSubmit}>\r\n            <p className='containerRegisterTextUsername'>Имя пользователя</p>\r\n            <input value={username} onChange={(e) => setUsername(e.target.value)} />\r\n\r\n            <p className='containerRegisterTextPassword'>Пароль</p>\r\n            <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} />\r\n\r\n            <div className='buttonContainer'>\r\n              <button type=\"submit\">\r\n                Зарегистрироваться\r\n              </button>\r\n                <p>После регистрации нужно будет авторизоваться</p>\r\n            </div>\r\n\r\n            <div className='errorMessageContainer'>\r\n              {isAdded && <p className={`errorMessage ${isVisible ? 'visible' : ''}`}>{error}</p>}\r\n            </div>\r\n\r\n          </form>\r\n        </div>\r\n        \r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}