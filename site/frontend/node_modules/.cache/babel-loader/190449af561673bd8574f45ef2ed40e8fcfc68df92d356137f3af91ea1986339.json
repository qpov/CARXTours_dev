{"ast":null,"code":"import _objectSpread from\"A:/CARXTours/site/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"A:/CARXTours/site/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"A:/CARXTours/site/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useParams,Link}from'react-router-dom';import Header from'../components/Header';import'../css/grid.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Grid(){var _useParams=useParams(),id=_useParams.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rounds=_useState2[0],setRounds=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),tournamentWinner=_useState4[0],setTournamentWinner=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),ownerId=_useState6[0],setOwnerId=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),winners=_useState8[0],setWinners=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),losers=_useState10[0],setLosers=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),thirdPlaceFighters=_useState12[0],setThirdPlaceFighters=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),thirdPlaceWinner=_useState14[0],setThirdPlaceWinner=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),thirdPlaceMatch=_useState16[0],setThirdPlaceMatch=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),participants=_useState18[0],setParticipants=_useState18[1];var totalRounds=Math.ceil(Math.log2(participants.length));var createRound=function createRound(players){var pairs=[];for(var i=0;i<players.length;i+=2){pairs.push({players:[players[i],players[i+1]],winner:null});}if(players.length%2===1){pairs[pairs.length-1].players.push(null);}return pairs;};useEffect(function(){var activeRound=rounds[rounds.length-1];if(!activeRound)return;var allPairsHaveWinners=activeRound.every(function(pair){return pair.winner!==null;});if(!allPairsHaveWinners)return;var winners=activeRound.map(function(pair){return pair.winner;});var losers=activeRound.map(function(pair){return pair.players.find(function(player){return player!==pair.winner;});});setLosers(losers);if(winners.length===2){setThirdPlaceFighters(losers);}else if(winners.length===1){setTournamentWinner(winners[0]);setWinners(function(prevWinners){return[].concat(_toConsumableArray(prevWinners),[winners[0]]);});return;}var newRound=createRound(winners);setRounds(function(prevRounds){return[].concat(_toConsumableArray(prevRounds),[newRound]);});},[rounds]);var handleWinnerSelect=function handleWinnerSelect(roundIndex,pairIndex,winnerIndex){var currentUserId=parseInt(window.localStorage.getItem('userId'));if(currentUserId!==ownerId){alert('Вы не являетесь владельцем этого турнира');return;}var updatedRounds=rounds.map(function(round,index){if(index===roundIndex){var updatedPairs=round.map(function(pair,pIndex){if(pIndex===pairIndex){var winner=pair.players[winnerIndex]?pair.players[winnerIndex]:null;console.log('Selected winner:',winner);return _objectSpread(_objectSpread({},pair),{},{winner:winner?_objectSpread({},winner):null});}return pair;});return updatedPairs;}return round;});setRounds(updatedRounds);var winners=updatedRounds[roundIndex].map(function(pair){return pair.winner;});var losers=updatedRounds[roundIndex].map(function(pair){return pair.players.find(function(player){return player!==pair.winner;});});if(roundIndex===totalRounds-2&&losers[0]){setThirdPlaceMatch({players:losers,winner:null});}setWinners(function(prevWinners){return[].concat(_toConsumableArray(prevWinners),_toConsumableArray(winners));});};var handleThirdPlaceWinnerSelect=function handleThirdPlaceWinnerSelect(winnerIndex){var currentUserId=parseInt(window.localStorage.getItem('userId'));if(currentUserId!==ownerId){alert('Вы не являетесь владельцем этого турнира');return;}if(thirdPlaceMatch&&thirdPlaceMatch.players&&thirdPlaceMatch.players[winnerIndex]){var updatedThirdPlaceMatch={players:thirdPlaceMatch.players,winner:thirdPlaceMatch.players[winnerIndex]// Установка победителя в соответствии с выбранным индексом\n};setThirdPlaceMatch(updatedThirdPlaceMatch);setThirdPlaceWinner(updatedThirdPlaceMatch.winner);}else{alert('Выбранный индекс не соответствует участнику');}};var thirdPlaceWinnerName=thirdPlaceWinner?thirdPlaceWinner.username:'';useEffect(function(){fetch(\"https://carxtours.com/api/tournaments/detail/\".concat(id,\"/\"),{method:'GET',headers:{'Content-Type':'application/json'}}).then(function(response){if(!response.ok){throw new Error('Error loading participants');}return response.json();}).then(function(data){if(!Array.isArray(data.participants)){console.error('Participants must be an array');return;}var participants=data.participants.map(function(participant){return{id:participant.user.id,username:participant.user.username,try1:participant.try1,try2:participant.try2};});setParticipants(participants);// Установка participants в состоянии\nvar totalRounds=Math.ceil(Math.log2(participants.length));// Вычисление totalRounds\nvar initialRounds=[createRound(participants)];setOwnerId(data.owner);console.log('Owner Id:',data.owner);if(participants.length>2){// Если участников больше 2, добавляется матч за третье место после финала\nvar finalRoundIndex=Math.ceil(Math.log2(participants.length));var newRound=createRound([null,null]);setRounds(function(prevRounds){return[].concat(_toConsumableArray(prevRounds.slice(0,finalRoundIndex)),[newRound],_toConsumableArray(prevRounds.slice(finalRoundIndex)));});}setRounds(initialRounds);}).catch(function(err){return console.error(err);});},[id]);return/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour_grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"back\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0422\\u0443\\u0440\\u043D\\u0438\\u0440\\u043D\\u0430\\u044F \\u0441\\u0435\\u0442\\u043A\\u0430\"}),/*#__PURE__*/_jsx(Link,{to:\"/tournament/\".concat(id,\"/\"),children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})]}),rounds.map(function(round,roundIndex){return/*#__PURE__*/_jsxs(\"div\",{className:\"round\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Round \",roundIndex+1]}),/*#__PURE__*/_jsx(\"ul\",{children:round.map(function(pair,pairIndex){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fp\",children:/*#__PURE__*/_jsx(\"button\",{disabled:pair.winner!==null,onClick:function onClick(){return handleWinnerSelect(roundIndex,pairIndex,0);},children:pair.players[0]?pair.players[0].username:'Участник не определен'})}),/*#__PURE__*/_jsx(\"div\",{className:\"tp\",children:/*#__PURE__*/_jsx(\"button\",{disabled:pair.winner!==null||!pair.players[1],onClick:function onClick(){return handleWinnerSelect(roundIndex,pairIndex,1);},children:pair.players[1]?pair.players[1].username:'Участник не определен'})})]},pairIndex);})}),roundIndex===rounds.length-1&&thirdPlaceMatch&&!thirdPlaceWinner&&/*#__PURE__*/_jsxs(\"div\",{className:\"round\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Match for the third place\"}),/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"button\",{disabled:thirdPlaceMatch.winner!==null,onClick:function onClick(){return handleThirdPlaceWinnerSelect(0);},children:thirdPlaceMatch.players[0].username}),/*#__PURE__*/_jsx(\"button\",{disabled:thirdPlaceMatch.winner!==null,onClick:function onClick(){return handleThirdPlaceWinnerSelect(1);},children:thirdPlaceMatch.players[1].username})]})})]})]},roundIndex);}),tournamentWinner&&/*#__PURE__*/_jsxs(\"div\",{className:\"winner\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041F\\u043E\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C \\u0442\\u0443\\u0440\\u043D\\u0438\\u0440\\u0430\"}),/*#__PURE__*/_jsx(\"p\",{children:tournamentWinner.username})]}),thirdPlaceWinner&&/*#__PURE__*/_jsxs(\"div\",{className:\"round\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0422\\u0440\\u0435\\u0442\\u044C\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\"}),/*#__PURE__*/_jsx(\"p\",{children:thirdPlaceWinnerName})]})]})]});}export default Grid;","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","Header","jsx","_jsx","jsxs","_jsxs","Grid","_useParams","id","_useState","_useState2","_slicedToArray","rounds","setRounds","_useState3","_useState4","tournamentWinner","setTournamentWinner","_useState5","_useState6","ownerId","setOwnerId","_useState7","_useState8","winners","setWinners","_useState9","_useState10","losers","setLosers","_useState11","_useState12","thirdPlaceFighters","setThirdPlaceFighters","_useState13","_useState14","thirdPlaceWinner","setThirdPlaceWinner","_useState15","_useState16","thirdPlaceMatch","setThirdPlaceMatch","_useState17","_useState18","participants","setParticipants","totalRounds","Math","ceil","log2","length","createRound","players","pairs","i","push","winner","activeRound","allPairsHaveWinners","every","pair","map","find","player","prevWinners","concat","_toConsumableArray","newRound","prevRounds","handleWinnerSelect","roundIndex","pairIndex","winnerIndex","currentUserId","parseInt","window","localStorage","getItem","alert","updatedRounds","round","index","updatedPairs","pIndex","console","log","_objectSpread","handleThirdPlaceWinnerSelect","updatedThirdPlaceMatch","thirdPlaceWinnerName","username","fetch","method","headers","then","response","ok","Error","json","data","Array","isArray","error","participant","user","try1","try2","initialRounds","owner","finalRoundIndex","slice","catch","err","className","children","to","disabled","onClick"],"sources":["A:/CARXTours/site/frontend/src/pages/Grid.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport Header from '../components/Header';\r\nimport '../css/grid.css';\r\n\r\n  function Grid() {\r\n    const { id } = useParams();\r\n    const [rounds, setRounds] = useState([]);\r\n    const [tournamentWinner, setTournamentWinner] = useState(null);\r\n    const [ownerId, setOwnerId] = useState(null);\r\n    const [winners, setWinners] = useState([]);\r\n    const [losers, setLosers] = useState([]);\r\n    const [thirdPlaceFighters, setThirdPlaceFighters] = useState([]);\r\n    const [thirdPlaceWinner, setThirdPlaceWinner] = useState(null);\r\n    const [thirdPlaceMatch, setThirdPlaceMatch] = useState(null);\r\n    const [participants, setParticipants] = useState([]);\r\n    const totalRounds = Math.ceil(Math.log2(participants.length));\r\n\r\n    const createRound = (players) => {\r\n      const pairs = [];\r\n      for (let i = 0; i < players.length; i += 2) {\r\n        pairs.push({\r\n          players: [players[i], players[i + 1]],\r\n          winner: null,\r\n        });\r\n      }\r\n    \r\n      if (players.length % 2 === 1) {\r\n        pairs[pairs.length - 1].players.push(null);\r\n      }\r\n    \r\n      return pairs;\r\n    };\r\n    \r\n    useEffect(() => {\r\n      const activeRound = rounds[rounds.length - 1];\r\n      if (!activeRound) return;\r\n    \r\n      const allPairsHaveWinners = activeRound.every(pair => pair.winner !== null);\r\n      if (!allPairsHaveWinners) return;\r\n    \r\n      const winners = activeRound.map(pair => pair.winner);\r\n      const losers = activeRound.map(pair => pair.players.find(player => player !== pair.winner));\r\n    \r\n      setLosers(losers);\r\n    \r\n      if (winners.length === 2) {\r\n        setThirdPlaceFighters(losers);\r\n      } else if (winners.length === 1) {\r\n        setTournamentWinner(winners[0]);\r\n        setWinners(prevWinners => [...prevWinners, winners[0]]);\r\n        return;\r\n      }\r\n    \r\n      const newRound = createRound(winners);\r\n      setRounds(prevRounds => [...prevRounds, newRound]);\r\n    \r\n    }, [rounds]);    \r\n\r\n    const handleWinnerSelect = (roundIndex, pairIndex, winnerIndex) => {\r\n      const currentUserId = parseInt(window.localStorage.getItem('userId'));\r\n    \r\n      if (currentUserId !== ownerId) {\r\n        alert('Вы не являетесь владельцем этого турнира');\r\n        return;\r\n      }\r\n    \r\n      const updatedRounds = rounds.map((round, index) => {\r\n        if (index === roundIndex) {\r\n          const updatedPairs = round.map((pair, pIndex) => {\r\n            if (pIndex === pairIndex) {\r\n              const winner = pair.players[winnerIndex] ? pair.players[winnerIndex] : null;\r\n              console.log('Selected winner:', winner);\r\n              return {\r\n                ...pair,\r\n                winner: winner ? { ...winner } : null,\r\n              };\r\n            }\r\n            return pair;\r\n          });\r\n          return updatedPairs;\r\n        }\r\n        return round;\r\n      });\r\n    \r\n      setRounds(updatedRounds);\r\n    \r\n      const winners = updatedRounds[roundIndex].map(pair => pair.winner);\r\n      const losers = updatedRounds[roundIndex].map(pair => pair.players.find(player => player !== pair.winner));\r\n    \r\n      if (roundIndex === totalRounds - 2 && losers[0]) {\r\n        setThirdPlaceMatch({ players: losers, winner: null });\r\n      }\r\n    \r\n      setWinners(prevWinners => [...prevWinners, ...winners]);\r\n    };\r\n\r\n    const handleThirdPlaceWinnerSelect = (winnerIndex) => {\r\n      const currentUserId = parseInt(window.localStorage.getItem('userId'));\r\n    \r\n      if (currentUserId !== ownerId) {\r\n        alert('Вы не являетесь владельцем этого турнира');\r\n        return;\r\n      }\r\n    \r\n      if (thirdPlaceMatch && thirdPlaceMatch.players && thirdPlaceMatch.players[winnerIndex]) {\r\n        const updatedThirdPlaceMatch = {\r\n          players: thirdPlaceMatch.players,\r\n          winner: thirdPlaceMatch.players[winnerIndex], // Установка победителя в соответствии с выбранным индексом\r\n        };\r\n        setThirdPlaceMatch(updatedThirdPlaceMatch);\r\n        setThirdPlaceWinner(updatedThirdPlaceMatch.winner);\r\n      } else {\r\n        alert('Выбранный индекс не соответствует участнику');\r\n      }\r\n    };  \r\n\r\n    const thirdPlaceWinnerName = thirdPlaceWinner ? thirdPlaceWinner.username : '';\r\n\r\n    useEffect(() => {\r\n      fetch(`https://carxtours.com/api/tournaments/detail/${id}/`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      })\r\n        .then(response => {\r\n          if (!response.ok) {\r\n            throw new Error('Error loading participants');\r\n          }\r\n          return response.json();\r\n        })\r\n        .then(data => {\r\n          if (!Array.isArray(data.participants)) {\r\n            console.error('Participants must be an array');\r\n            return;\r\n          }\r\n          const participants = data.participants.map(participant => ({\r\n            id: participant.user.id,\r\n            username: participant.user.username,\r\n            try1: participant.try1,\r\n            try2: participant.try2,\r\n          }));\r\n          setParticipants(participants);  // Установка participants в состоянии\r\n          const totalRounds = Math.ceil(Math.log2(participants.length));  // Вычисление totalRounds\r\n          const initialRounds = [createRound(participants)];\r\n          setOwnerId(data.owner);\r\n          console.log('Owner Id:', data.owner);\r\n    \r\n          if (participants.length > 2) {\r\n            // Если участников больше 2, добавляется матч за третье место после финала\r\n            const finalRoundIndex = Math.ceil(Math.log2(participants.length));\r\n            const newRound = createRound([null, null]);\r\n            setRounds(prevRounds => [\r\n              ...prevRounds.slice(0, finalRoundIndex),\r\n              newRound,\r\n              ...prevRounds.slice(finalRoundIndex),\r\n            ]);\r\n          }\r\n          setRounds(initialRounds);\r\n        })\r\n        .catch(err => console.error(err));\r\n    }, [id]);\r\n\r\n    return (\r\n      <div className=\"grid\">\r\n        <Header />\r\n        <div className=\"tour_grid\">\r\n          <div className=\"back\">\r\n            <h3>Турнирная сетка</h3>\r\n            <Link to={`/tournament/${id}/`}>Назад</Link>\r\n          </div>\r\n          {rounds.map((round, roundIndex) => (\r\n            <div className=\"round\" key={roundIndex}>\r\n              <h4>Round {roundIndex + 1}</h4>\r\n              <ul>\r\n                {round.map((pair, pairIndex) => (\r\n                  <li key={pairIndex}>\r\n                    <div className=\"fp\">\r\n                      <button\r\n                        disabled={pair.winner !== null}\r\n                        onClick={() => handleWinnerSelect(roundIndex, pairIndex, 0)}\r\n                      >\r\n                        {pair.players[0] ? pair.players[0].username : 'Участник не определен'}\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"tp\">\r\n                      <button\r\n                        disabled={pair.winner !== null || !pair.players[1]}\r\n                        onClick={() => handleWinnerSelect(roundIndex, pairIndex, 1)}\r\n                      >\r\n                        {pair.players[1] ? pair.players[1].username : 'Участник не определен'}\r\n                      </button>\r\n                    </div>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n              {roundIndex === rounds.length - 1 && thirdPlaceMatch && !thirdPlaceWinner && (\r\n                <div className=\"round\">\r\n                  <h4>Match for the third place</h4>\r\n                  <ul>\r\n                    <li>\r\n                      <button\r\n                        disabled={thirdPlaceMatch.winner !== null}\r\n                        onClick={() => handleThirdPlaceWinnerSelect(0)}\r\n                      >\r\n                        {thirdPlaceMatch.players[0].username}\r\n                      </button>\r\n                      <button\r\n                        disabled={thirdPlaceMatch.winner !== null}\r\n                        onClick={() => handleThirdPlaceWinnerSelect(1)}\r\n                      >\r\n                        {thirdPlaceMatch.players[1].username}\r\n                      </button>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n    \r\n          {tournamentWinner && (\r\n            <div className=\"winner\">\r\n              <h4>Победитель турнира</h4>\r\n              <p>{tournamentWinner.username}</p>\r\n            </div>\r\n          )}\r\n    \r\n          {thirdPlaceWinner && (\r\n            <div className=\"round\">\r\n              <h4>Третье место</h4>\r\n              <p>{thirdPlaceWinnerName}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  export default Grid;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}