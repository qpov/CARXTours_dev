{"ast":null,"code":"import _defineProperty from\"A:/CARXTours/site/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"A:/CARXTours/site/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"A:/CARXTours/site/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"A:/CARXTours/site/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import Header from'../components/Header';import'../css/tournamentPage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TournamentPage(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),tournament=_useState2[0],setTournament=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isParticipating=_useState4[0],setIsParticipating=_useState4[1];var _useState5=useState('Участвовать'),_useState6=_slicedToArray(_useState5,2),buttonText=_useState6[0],setButtonText=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isFull=_useState8[0],setIsFull=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isOwner=_useState10[0],setIsOwner=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isEditing=_useState12[0],setIsEditing=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),tournamentName=_useState14[0],setTournamentName=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),mapName=_useState16[0],setMapName=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),date=_useState18[0],setDate=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),mapLink=_useState20[0],setMapLink=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),example=_useState22[0],setExample=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),task=_useState24[0],setTask=_useState24[1];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),reglament=_useState26[0],setReglament=_useState26[1];var _useState27=useState(''),_useState28=_slicedToArray(_useState27,2),visualReglament=_useState28[0],setVisualReglament=_useState28[1];var _useState29=useState(''),_useState30=_slicedToArray(_useState29,2),maxPilots=_useState30[0],setMaxPilots=_useState30[1];var _useState31=useState({}),_useState32=_slicedToArray(_useState31,2),try1Values=_useState32[0],setTry1Values=_useState32[1];var _useState33=useState({}),_useState34=_slicedToArray(_useState33,2),try2Values=_useState34[0],setTry2Values=_useState34[1];useEffect(function(){fetch(\"https://carxtours.com/api/tournaments/detail/\".concat(id,\"/\"),{method:'GET',headers:{'Content-Type':'application/json'}}).then(function(response){if(!response.ok){throw new Error('Ошибка при загрузке турнира');}return response.json();}).then(function(data){setTournament(data);setTournamentName(data.tournament_name);setMapName(data.map);setDate(data.date);setMapLink(data.map_link);setExample(data.example);setTask(data.task);setReglament(data.reglament);setVisualReglament(data.visual_reglament);setMaxPilots(data.max_pilots!==null?String(data.max_pilots):'');if(data.participants&&data.max_pilots!==null&&data.participants.length>=data.max_pilots){setIsFull(true);}}).catch(function(err){return console.error(err);});},[id]);useEffect(function(){var userId=parseInt(localStorage.getItem('userId'),10);if(tournament&&tournament.participants&&tournament.participants.some(function(participant){return participant.user.id===userId;})){setIsParticipating(true);setButtonText('Вы уже участвуете');}if(tournament&&tournament.owner===userId){setIsOwner(true);}},[tournament]);var handleParticipate=function handleParticipate(){var userId=localStorage.getItem('userId');if(!userId){console.error('Ошибка: userId не найден');return;}if(tournament.participants&&tournament.participants.some(function(participant){return participant.user.id===parseInt(userId,10)&&participant.tournament===parseInt(id,10);})){setIsParticipating(true);setButtonText('Вы уже участвуете');return;}fetch('https://carxtours.com/api/tournaments/participant/',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Token \".concat(localStorage.getItem('token'))},body:JSON.stringify({user_id:parseInt(userId,10),tournament:parseInt(id,10)})}).then(function(response){if(!response.ok){throw new Error('Ошибка при добавлении участника');}return response.json();}).then(function(participantData){console.log('Участник успешно добавлен');console.log('Имя пользователя:',participantData.user.username);var newParticipant={id:participantData.id,// добавьте это\nuser:{id:participantData.user.id,username:participantData.user.username},tournament:parseInt(id,10)};var newParticipants=[].concat(_toConsumableArray(tournament.participants),[newParticipant]);if(tournament.max_pilots!==null&&newParticipants.length>=tournament.max_pilots){setIsFull(true);}setTournament(function(prevTournament){return _objectSpread(_objectSpread({},prevTournament),{},{participants:newParticipants});});setIsParticipating(true);setButtonText('Вы уже участвуете');// Обновление состояния турнира с новым списком участников\nsetTournament(function(prevTournament){return _objectSpread(_objectSpread({},prevTournament),{},{participants:newParticipants});});}).catch(function(err){return console.error(err);});};var handleEdit=function handleEdit(){setIsEditing(true);};var handleSave=function handleSave(){var updatedTournament={tournament_name:tournamentName,map:mapName,date:date,map_link:mapLink,task:task,reglament:reglament,visual_reglament:visualReglament,max_pilots:maxPilots!==''?parseInt(maxPilots,10):null,short_org_name:tournament.short_org_name,// берем из текущего состояния турнира\nfull_org_name:tournament.full_org_name,// берем из текущего состояния турнира\nexample:example,// берем из текущего состояния турнира\nowner:tournament.owner// берем из текущего состояния турнира\n};fetch(\"https://carxtours.com/api/tournaments/detail/\".concat(id,\"/\"),{method:'PUT',headers:{'Content-Type':'application/json','Authorization':\"Token \".concat(localStorage.getItem('token'))},body:JSON.stringify(updatedTournament)}).then(function(response){if(!response.ok){return response.json().then(function(err){return Promise.reject(err);});}return response.json();}).then(function(data){setTournament(data);setIsEditing(false);console.log('Данные турнира успешно обновлены');}).catch(function(err){return console.error(err);});};var handleDeleteParticipant=function handleDeleteParticipant(participantId,tournamentId){fetch(\"https://carxtours.com/api/tournaments/participant/\".concat(participantId,\"/tournament/\").concat(tournamentId,\"/\"),{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':\"Token \".concat(localStorage.getItem('token'))}}).then(function(response){if(!response.ok){throw new Error('Ошибка при удалении участника');}// Если статус ответа 204 - успешное выполнение без тела ответа, просто верните response\nif(response.status===204){return response;}// В других случаях попытайтесь вернуть JSON\nreturn response.json();}).then(function(data){var updatedParticipants=tournament.participants.filter(function(participant){return participant.user.id!==participantId;});setTournament(_objectSpread(_objectSpread({},tournament),{},{participants:updatedParticipants}));console.log('Участник успешно удален');}).catch(function(err){return console.error(err);});};var handleUpdateParticipant=function handleUpdateParticipant(participantId,tournamentId){var try1=try1Values[participantId];var try2=try2Values[participantId];if(try1===''&&try2===''){console.error('Нельзя отправить пустые значения try1 и try2');return;}var updatedData={tournament:tournamentId,try1:try1!==''?try1:undefined,try2:try2!==''?try2:undefined};fetch(\"https://carxtours.com/api/tournaments/update/\".concat(tournamentId,\"/participants/\").concat(participantId,\"/\"),{method:'PUT',headers:{'Content-Type':'application/json',Authorization:\"Token \".concat(localStorage.getItem('token'))},body:JSON.stringify(updatedData)}).then(function(response){if(!response.ok){throw new Error('Ошибка при обновлении участника');}return response.json();}).then(function(data){var updatedParticipants=tournament.participants.map(function(participant){return participant.id===participantId?data:participant;});setTournament(_objectSpread(_objectSpread({},tournament),{},{participants:updatedParticipants}));console.log('Данные участника успешно обновлены');setTry1Values(function(prevState){var newState=_objectSpread({},prevState);delete newState[participantId];return newState;});setTry2Values(function(prevState){var newState=_objectSpread({},prevState);delete newState[participantId];return newState;});}).catch(function(err){return console.error(err);});};if(!tournament){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"tournamentPage\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[tournament.task&&/*#__PURE__*/_jsxs(\"div\",{className:\"task\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"bold\",children:\"\\u0421\\u0443\\u0434\\u0435\\u0439\\u0441\\u043A\\u043E\\u0435 \\u0437\\u0430\\u0434\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"p\",{children:tournament.task})]},\"task\"),tournament.reglament&&/*#__PURE__*/_jsxs(\"div\",{className:\"reglament\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"bold\",children:\"\\u0420\\u0435\\u0433\\u043B\\u0430\\u043C\\u0435\\u043D\\u0442:\"}),/*#__PURE__*/_jsx(\"p\",{children:tournament.reglament})]},\"reglament\"),tournament.visual_reglament&&/*#__PURE__*/_jsxs(\"div\",{className:\"visual_reglament\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"bold\",children:\"\\u0412\\u0438\\u0437\\u0443\\u0430\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0440\\u0435\\u0433\\u043B\\u0430\\u043C\\u0435\\u043D\\u0442:\"}),/*#__PURE__*/_jsx(\"p\",{children:tournament.visual_reglament})]},\"visual-reglament\"),isEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"edit-fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tourNameEdit\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tournamentName\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u0443\\u0440\\u043D\\u0438\\u0440\\u0430:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"tournamentName\",value:tournamentName,onChange:function onChange(e){return setTournamentName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mapNameEdit\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"mapName\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u0440\\u0442\\u044B:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"mapName\",value:mapName,onChange:function onChange(e){return setMapName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dateEdit\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u043F\\u0440\\u043E\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"date\",value:date,onChange:function onChange(e){return setDate(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mapLinkEdit\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"mapLink\",children:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0443:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"mapLink\",value:mapLink,onChange:function onChange(e){return setMapLink(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"exampleEdit\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"example\",children:\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0440\\u043D\\u044B\\u0439 \\u043F\\u0440\\u043E\\u0435\\u0437\\u0434:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"example\",value:example,onChange:function onChange(e){return setExample(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"taskEdit\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"task\",children:\"\\u0421\\u0443\\u0434\\u0435\\u0439\\u0441\\u043A\\u043E\\u0435 \\u0437\\u0430\\u0434\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"task\",value:task,onChange:function onChange(e){return setTask(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reglamentEdit\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"reglament\",children:\"\\u0420\\u0435\\u0433\\u043B\\u0430\\u043C\\u0435\\u043D\\u0442:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"reglament\",value:reglament,onChange:function onChange(e){return setReglament(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"visualReglamentEdit\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"visualReglament\",children:\"\\u0412\\u0438\\u0437\\u0443\\u0430\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0440\\u0435\\u0433\\u043B\\u0430\\u043C\\u0435\\u043D\\u0442:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"visualReglament\",value:visualReglament,onChange:function onChange(e){return setVisualReglament(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"maxPilotsEdit\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"maxPilots\",children:\"\\u041E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u0438\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u0430 \\u043F\\u0438\\u043B\\u043E\\u0442\\u043E\\u0432 (\\u043E\\u0441\\u0442\\u0430\\u0432\\u044C\\u0442\\u0435 \\u043F\\u043E\\u043B\\u0435 \\u043F\\u0443\\u0441\\u0442\\u044B\\u043C, \\u0435\\u0441\\u043B\\u0438 \\u043E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0435 \\u043D\\u0443\\u0436\\u043D\\u043E):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"maxPilots\",value:maxPilots,onChange:function onChange(e){return setMaxPilots(e.target.value);}})]})]},\"edit-fields\"),!isEditing&&/*#__PURE__*/_jsx(\"div\",{className:\"max_pilots\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"bold\",children:[\"\\u041E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u0438\\u0435 \\u043A\\u043E\\u043B-\\u0432\\u043E \\u043F\\u0438\\u043B\\u043E\\u0442\\u043E\\u0432: \",tournament.max_pilots!==null?parseInt(tournament.max_pilots,10):'Нет']})},\"max-pilots\"),tournament.participants&&/*#__PURE__*/_jsxs(\"div\",{className:\"Participant\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"bold\",children:\"\\u0423\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u0438:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"participant-container\",children:tournament.participants.map(function(participant){return participant&&participant.user&&participant.user.id&&participant.user.username&&/*#__PURE__*/_jsx(\"div\",{className:\"participant-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"participant-info\",children:[/*#__PURE__*/_jsx(\"p\",{children:participant.user.username}),isOwner&&isEditing&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeleteParticipant(participant.user.id,id);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})},participant.user.id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"enter\",children:isFull?/*#__PURE__*/_jsx(\"p\",{children:\"\\u0414\\u043E\\u0441\\u0442\\u0438\\u0433\\u043D\\u0443\\u0442\\u043E \\u043C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u043E\\u0432\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleParticipate,disabled:isParticipating,children:buttonText},\"participate-button\")},\"enter\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tour_image\",children:tournament.image&&/*#__PURE__*/_jsx(\"img\",{src:\"https://carxtours.com/api/tournaments/\".concat(tournament.image),alt:\"Tournament\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0442\\u043E\\u0440 / \\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u0443\\u0440\\u043D\\u0438\\u0440\\u0430 / \\u041A\\u0430\\u0440\\u0442\\u0430 / \\u0414\\u0430\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tour_info\",children:tournament.full_org_name&&tournamentName&&mapName&&date&&/*#__PURE__*/_jsxs(\"p\",{children:[tournament.full_org_name,\": \",tournamentName,\" / \",mapName,\" - \\u0414\\u0430\\u0442\\u0430 \\u043F\\u0440\\u043E\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u044F: \",date]},\"header-info\")}),(tournament.map_link||tournament.example)&&/*#__PURE__*/_jsxs(\"div\",{className:\"a\",style:{display:'flex'},children:[tournament.map_link&&/*#__PURE__*/_jsx(\"a\",{href:tournament.map_link,target:\"_blank\",rel:\"noopener noreferrer\",children:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0443\"},\"map-link\"),tournament.example&&/*#__PURE__*/_jsx(\"a\",{href:tournament.example,target:\"_blank\",rel:\"noopener noreferrer\",children:\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0440\\u043D\\u044B\\u0439 \\u043F\\u0440\\u043E\\u0435\\u0437\\u0434\"},\"example-link\"),isOwner&&!isEditing&&/*#__PURE__*/_jsx(\"div\",{className:\"edit-buttons\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleEdit,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})},\"edit-buttons\"),isEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"edit-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setIsEditing(false);},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]},\"edit-buttons\")]},\"a\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"qualification\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041A\\u0432\\u0430\\u043B\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F\"}),tournament&&tournament.participants&&tournament.participants.map(function(participant){var participantId=participant.user.id;var try1Value=try1Values[participantId]||'';var try2Value=try2Values[participantId]||'';if(isOwner){return/*#__PURE__*/_jsxs(\"div\",{className:\"qual_info\",children:[/*#__PURE__*/_jsx(\"p\",{children:participant.user.username}),/*#__PURE__*/_jsxs(\"p\",{children:[\"1 \\u0437\\u0430\\u0435\\u0437\\u0434: \",participant.try1]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:try1Value,onChange:function onChange(e){return setTry1Values(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},participantId,e.target.value));});}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"2 \\u0437\\u0430\\u0435\\u0437\\u0434: \",participant.try2]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:try2Value,onChange:function onChange(e){return setTry2Values(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},participantId,e.target.value));});}}),/*#__PURE__*/_jsx(\"div\",{className:\"qual_info\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){if(!isNaN(try1Value)&&!isNaN(try2Value)){handleUpdateParticipant(participantId,tournament.id);}else{console.error('Неверные значения try1 или try2');}},children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})]},participantId);}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"qual_info\",children:[/*#__PURE__*/_jsx(\"p\",{children:participant.user.username}),/*#__PURE__*/_jsxs(\"p\",{children:[\"1 \\u0437\\u0430\\u0435\\u0437\\u0434: \",participant.try1]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"2 \\u0437\\u0430\\u0435\\u0437\\u0434: \",participant.try2]})]},participantId);}})]})]},\"tournamentPage\");}export default TournamentPage;","map":{"version":3,"names":["React","useEffect","useState","useParams","Header","jsx","_jsx","jsxs","_jsxs","TournamentPage","_useParams","id","_useState","_useState2","_slicedToArray","tournament","setTournament","_useState3","_useState4","isParticipating","setIsParticipating","_useState5","_useState6","buttonText","setButtonText","_useState7","_useState8","isFull","setIsFull","_useState9","_useState10","isOwner","setIsOwner","_useState11","_useState12","isEditing","setIsEditing","_useState13","_useState14","tournamentName","setTournamentName","_useState15","_useState16","mapName","setMapName","_useState17","_useState18","date","setDate","_useState19","_useState20","mapLink","setMapLink","_useState21","_useState22","example","setExample","_useState23","_useState24","task","setTask","_useState25","_useState26","reglament","setReglament","_useState27","_useState28","visualReglament","setVisualReglament","_useState29","_useState30","maxPilots","setMaxPilots","_useState31","_useState32","try1Values","setTry1Values","_useState33","_useState34","try2Values","setTry2Values","fetch","concat","method","headers","then","response","ok","Error","json","data","tournament_name","map","map_link","visual_reglament","max_pilots","String","participants","length","catch","err","console","error","userId","parseInt","localStorage","getItem","some","participant","user","owner","handleParticipate","body","JSON","stringify","user_id","participantData","log","username","newParticipant","newParticipants","_toConsumableArray","prevTournament","_objectSpread","handleEdit","handleSave","updatedTournament","short_org_name","full_org_name","Promise","reject","handleDeleteParticipant","participantId","tournamentId","status","updatedParticipants","filter","handleUpdateParticipant","try1","try2","updatedData","undefined","Authorization","prevState","newState","children","className","htmlFor","type","value","onChange","e","target","onClick","disabled","image","src","alt","style","display","href","rel","try1Value","try2Value","_defineProperty","isNaN"],"sources":["A:/CARXTours/site/frontend/src/pages/TournamentPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport Header from '../components/Header';\r\nimport '../css/tournamentPage.css';\r\n\r\nfunction TournamentPage() {\r\n  const { id } = useParams();\r\n  const [tournament, setTournament] = useState(null);\r\n  const [isParticipating, setIsParticipating] = useState(false);\r\n  const [buttonText, setButtonText] = useState('Участвовать');\r\n  const [isFull, setIsFull] = useState(false);\r\n  const [isOwner, setIsOwner] = useState(false);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [tournamentName, setTournamentName] = useState('');\r\n  const [mapName, setMapName] = useState('');\r\n  const [date, setDate] = useState('');\r\n  const [mapLink, setMapLink] = useState('');\r\n  const [example, setExample] = useState('');\r\n  const [task, setTask] = useState('');\r\n  const [reglament, setReglament] = useState('');\r\n  const [visualReglament, setVisualReglament] = useState('');\r\n  const [maxPilots, setMaxPilots] = useState('');\r\n  const [try1Values, setTry1Values] = useState({});\r\n  const [try2Values, setTry2Values] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetch(`https://carxtours.com/api/tournaments/detail/${id}/`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    })\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error('Ошибка при загрузке турнира');\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(data => {\r\n        setTournament(data);\r\n        setTournamentName(data.tournament_name);\r\n        setMapName(data.map);\r\n        setDate(data.date);\r\n        setMapLink(data.map_link);\r\n        setExample(data.example);\r\n        setTask(data.task);\r\n        setReglament(data.reglament);\r\n        setVisualReglament(data.visual_reglament);\r\n        setMaxPilots(data.max_pilots !== null ? String(data.max_pilots) : '');\r\n        if (data.participants && data.max_pilots !== null && data.participants.length >= data.max_pilots) {\r\n          setIsFull(true);\r\n        }\r\n      })\r\n      .catch(err => console.error(err));\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    const userId = parseInt(localStorage.getItem('userId'), 10);\r\n    if (tournament && tournament.participants && tournament.participants.some(participant => participant.user.id === userId)) {\r\n      setIsParticipating(true);\r\n      setButtonText('Вы уже участвуете');\r\n    }\r\n    if (tournament && tournament.owner === userId) {\r\n      setIsOwner(true);\r\n    }\r\n  }, [tournament]);\r\n\r\n  const handleParticipate = () => {\r\n    const userId = localStorage.getItem('userId');\r\n  \r\n    if (!userId) {\r\n      console.error('Ошибка: userId не найден');\r\n      return;\r\n    }\r\n  \r\n    if (\r\n      tournament.participants &&\r\n      tournament.participants.some(\r\n        participant => participant.user.id === parseInt(userId, 10) && participant.tournament === parseInt(id, 10)\r\n      )\r\n    ) {\r\n      setIsParticipating(true);\r\n      setButtonText('Вы уже участвуете');\r\n      return;\r\n    }\r\n  \r\n    fetch('https://carxtours.com/api/tournaments/participant/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${localStorage.getItem('token')}`,\r\n      },\r\n      body: JSON.stringify({ user_id: parseInt(userId, 10), tournament: parseInt(id, 10) })\r\n    })\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error('Ошибка при добавлении участника');\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(participantData => {\r\n        console.log('Участник успешно добавлен');\r\n        console.log('Имя пользователя:', participantData.user.username);\r\n  \r\n        const newParticipant = {\r\n          id: participantData.id, // добавьте это\r\n          user: {\r\n            id: participantData.user.id,\r\n            username: participantData.user.username\r\n          },\r\n          tournament: parseInt(id, 10)\r\n        };\r\n        const newParticipants = [\r\n          ...tournament.participants,\r\n          newParticipant\r\n        ];\r\n        if (tournament.max_pilots !== null && newParticipants.length >= tournament.max_pilots) {\r\n          setIsFull(true);\r\n        }\r\n        setTournament(prevTournament => ({\r\n          ...prevTournament,\r\n          participants: newParticipants\r\n        }));\r\n        setIsParticipating(true);\r\n        setButtonText('Вы уже участвуете');\r\n  \r\n        // Обновление состояния турнира с новым списком участников\r\n        setTournament(prevTournament => ({\r\n          ...prevTournament,\r\n          participants: newParticipants\r\n        }));\r\n      })\r\n      .catch(err => console.error(err));\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIsEditing(true);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const updatedTournament = {\r\n      tournament_name: tournamentName,\r\n      map: mapName,\r\n      date: date,\r\n      map_link: mapLink,\r\n      task: task,\r\n      reglament: reglament,\r\n      visual_reglament: visualReglament,\r\n      max_pilots: maxPilots !== '' ? parseInt(maxPilots, 10) : null,\r\n      short_org_name: tournament.short_org_name, // берем из текущего состояния турнира\r\n      full_org_name: tournament.full_org_name, // берем из текущего состояния турнира\r\n      example: example, // берем из текущего состояния турнира\r\n      owner: tournament.owner, // берем из текущего состояния турнира\r\n    };\r\n    \r\n    fetch(`https://carxtours.com/api/tournaments/detail/${id}/`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${localStorage.getItem('token')}`,\r\n      },\r\n      body: JSON.stringify(updatedTournament)\r\n    })\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        return response.json().then(err => Promise.reject(err));\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(data => {\r\n      setTournament(data);\r\n      setIsEditing(false);\r\n      console.log('Данные турнира успешно обновлены');\r\n    })\r\n    .catch(err => console.error(err));\r\n  };\r\n\r\n  const handleDeleteParticipant = (participantId, tournamentId) => {\r\n    fetch(`https://carxtours.com/api/tournaments/participant/${participantId}/tournament/${tournamentId}/`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${localStorage.getItem('token')}`,\r\n      },\r\n    })\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw new Error('Ошибка при удалении участника');\r\n      }\r\n      // Если статус ответа 204 - успешное выполнение без тела ответа, просто верните response\r\n      if(response.status === 204) {\r\n        return response;\r\n      }\r\n      // В других случаях попытайтесь вернуть JSON\r\n      return response.json();\r\n    })\r\n    .then(data => {\r\n      const updatedParticipants = tournament.participants.filter(participant => participant.user.id !== participantId);\r\n      setTournament({ ...tournament, participants: updatedParticipants });\r\n      console.log('Участник успешно удален');\r\n    })\r\n    .catch(err => console.error(err));\r\n  };\r\n\r\n  const handleUpdateParticipant = (participantId, tournamentId) => {\r\n    const try1 = try1Values[participantId];\r\n    const try2 = try2Values[participantId];\r\n\r\n    if (try1 === '' && try2 === '') {\r\n      console.error('Нельзя отправить пустые значения try1 и try2');\r\n      return;\r\n    }\r\n\r\n    const updatedData = {\r\n      tournament: tournamentId,\r\n      try1: try1 !== '' ? try1 : undefined,\r\n      try2: try2 !== '' ? try2 : undefined\r\n    };\r\n\r\n    fetch(\r\n      `https://carxtours.com/api/tournaments/update/${tournamentId}/participants/${participantId}/`,\r\n      {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Token ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify(updatedData)\r\n      }\r\n    )\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error('Ошибка при обновлении участника');\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(data => {\r\n        const updatedParticipants = tournament.participants.map(participant =>\r\n          participant.id === participantId ? data : participant\r\n        );\r\n        setTournament({ ...tournament, participants: updatedParticipants });\r\n        console.log('Данные участника успешно обновлены');\r\n        setTry1Values(prevState => {\r\n          const newState = { ...prevState };\r\n          delete newState[participantId];\r\n          return newState;\r\n        });\r\n        setTry2Values(prevState => {\r\n          const newState = { ...prevState };\r\n          delete newState[participantId];\r\n          return newState;\r\n        });\r\n      })\r\n      .catch(err => console.error(err));\r\n  };\r\n  \r\n\r\n  if (!tournament) {\r\n    return (\r\n      <div>\r\n        <Header />\r\n        <p>Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div key=\"tournamentPage\" className='tournamentPage'>\r\n      <Header />\r\n\r\n      <div className='page'>\r\n\r\n        {tournament.task && (\r\n          <div className='task' key=\"task\">\r\n            <p className='bold'>Судейское задание:</p>\r\n            <p>{tournament.task}</p>\r\n          </div>\r\n        )}\r\n\r\n        {tournament.reglament && (\r\n          <div className='reglament' key=\"reglament\">\r\n            <p className='bold'>Регламент:</p>\r\n            <p>{tournament.reglament}</p>\r\n          </div>\r\n        )}\r\n\r\n        {tournament.visual_reglament && (\r\n          <div className='visual_reglament' key=\"visual-reglament\">\r\n            <p className='bold'>Визуальный регламент:</p>\r\n            <p>{tournament.visual_reglament}</p>\r\n          </div>\r\n        )}\r\n\r\n        {isEditing && (\r\n          <div className='edit-fields' key=\"edit-fields\">\r\n\r\n            <div className='tourNameEdit'>\r\n              <label htmlFor='tournamentName'>Название турнира:</label>\r\n              <input\r\n                type='text'\r\n                id='tournamentName'\r\n                value={tournamentName}\r\n                onChange={e => setTournamentName(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className='mapNameEdit'>\r\n              <label htmlFor='mapName'>Название карты:</label>\r\n              <input\r\n                type='text'\r\n                id='mapName'\r\n                value={mapName}\r\n                onChange={e => setMapName(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className='dateEdit'>\r\n              <label htmlFor='date'>Дата проведения:</label>\r\n              <input\r\n                type='date'\r\n                id='date'\r\n                value={date}\r\n                onChange={e => setDate(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className='mapLinkEdit'>\r\n              <label htmlFor='mapLink'>Ссылка на карту:</label>\r\n              <input\r\n                type='text'\r\n                id='mapLink'\r\n                value={mapLink}\r\n                onChange={e => setMapLink(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className='exampleEdit'>\r\n              <label htmlFor='example'>Примерный проезд:</label>\r\n              <input\r\n                type='text'\r\n                id='example'\r\n                value={example}\r\n                onChange={e => setExample(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className='taskEdit'>\r\n              <label htmlFor='task'>Судейское задание:</label>\r\n              <textarea\r\n                id='task'\r\n                value={task}\r\n                onChange={e => setTask(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className='reglamentEdit'>\r\n              <label htmlFor='reglament'>Регламент:</label>\r\n              <textarea\r\n                id='reglament'\r\n                value={reglament}\r\n                onChange={e => setReglament(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className='visualReglamentEdit'>\r\n              <label htmlFor='visualReglament'>Визуальный регламент:</label>\r\n              <textarea\r\n                id='visualReglament'\r\n                value={visualReglament}\r\n                onChange={e => setVisualReglament(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className='maxPilotsEdit'>\r\n              <label htmlFor='maxPilots'>Ограничение количества пилотов (оставьте поле пустым, если ограничение не нужно):</label>\r\n              <input\r\n                type='number'\r\n                id='maxPilots'\r\n                value={maxPilots}\r\n                onChange={e => setMaxPilots(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n          </div>\r\n        )}\r\n\r\n        {!isEditing && (\r\n          <div className='max_pilots' key=\"max-pilots\">\r\n            <p className='bold'>Ограничение кол-во пилотов: {tournament.max_pilots !== null ? parseInt(tournament.max_pilots, 10) : 'Нет'}</p>\r\n          </div>\r\n        )}\r\n\r\n        {tournament.participants && (\r\n          <div className='Participant'>\r\n\r\n            <p className='bold'>Участники:</p>\r\n\r\n            <div className='participant-container'>\r\n              {tournament.participants.map(participant => (\r\n                participant && participant.user && participant.user.id && participant.user.username && (\r\n                  <div key={participant.user.id} className='participant-item'>\r\n                    <div className='participant-info'>\r\n                      <p>{participant.user.username}</p>\r\n                      {isOwner && isEditing && (\r\n                        <button onClick={() => handleDeleteParticipant(participant.user.id, id)}>Удалить</button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className='enter' key=\"enter\">\r\n          {isFull ? (\r\n            <p>Достигнуто максимальное количество участников</p>\r\n          ) : (\r\n            <button onClick={handleParticipate} disabled={isParticipating} key=\"participate-button\">\r\n              {buttonText}\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div className='right'>\r\n\r\n        <div className='tour_image'> \r\n          {/* добавляем отображение изображения */}\r\n          {tournament.image && <img src={`https://carxtours.com/api/tournaments/${tournament.image}`} alt='Tournament' />}\r\n        </div>\r\n\r\n        <p>Организатор / Название турнира / Карта / Дата</p>\r\n        <div className='tour_info'>\r\n          {tournament.full_org_name && tournamentName && mapName && date && (\r\n            <p key=\"header-info\">\r\n              {tournament.full_org_name}: {tournamentName} / {mapName} - Дата проведения: {date}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        {(tournament.map_link || tournament.example) && (\r\n          <div className='a' key=\"a\" style={{ display: 'flex' }}>\r\n\r\n            {tournament.map_link && (\r\n              <a href={tournament.map_link} target='_blank' rel='noopener noreferrer' key=\"map-link\">\r\n                Ссылка на карту\r\n              </a>\r\n            )}\r\n\r\n            {tournament.example && (\r\n              <a href={tournament.example} target='_blank' rel='noopener noreferrer' key=\"example-link\">\r\n                Примерный проезд\r\n              </a>\r\n            )}\r\n\r\n            {/* Добавить код кнопки \"Редактировать\" здесь */}\r\n            {isOwner && !isEditing && (\r\n              <div className='edit-buttons' key=\"edit-buttons\">\r\n                <button onClick={handleEdit}>Редактировать</button>\r\n              </div>\r\n            )}\r\n\r\n            {isEditing && (\r\n              <div className='edit-buttons' key=\"edit-buttons\">\r\n                <button onClick={handleSave}>Сохранить</button>\r\n                <button onClick={() => setIsEditing(false)}>Отмена</button>\r\n              </div>\r\n            )}\r\n\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className='qualification'>\r\n        <h3>Квалификация</h3>\r\n        {tournament &&\r\n          tournament.participants &&\r\n          tournament.participants.map(participant => {\r\n            const participantId = participant.user.id;\r\n            const try1Value = try1Values[participantId] || '';\r\n            const try2Value = try2Values[participantId] || '';\r\n\r\n            if (isOwner) {\r\n              return (\r\n                <div key={participantId} className='qual_info'>\r\n                  <p>{participant.user.username}</p>\r\n                  <p>1 заезд: {participant.try1}</p>\r\n                  <input\r\n                    type='number'\r\n                    value={try1Value}\r\n                    onChange={e =>\r\n                      setTry1Values(prevState => ({\r\n                        ...prevState,\r\n                        [participantId]: e.target.value\r\n                      }))\r\n                    }\r\n                  />\r\n                  <p>2 заезд: {participant.try2}</p>\r\n                  <input\r\n                    type='number'\r\n                    value={try2Value}\r\n                    onChange={e =>\r\n                      setTry2Values(prevState => ({\r\n                        ...prevState,\r\n                        [participantId]: e.target.value\r\n                      }))\r\n                    }\r\n                  />\r\n                  <div className='qual_info'>\r\n                    <button\r\n                      onClick={() => {\r\n                        if (!isNaN(try1Value) && !isNaN(try2Value)) {\r\n                          handleUpdateParticipant(participantId, tournament.id);\r\n                        } else {\r\n                          console.error('Неверные значения try1 или try2');\r\n                        }\r\n                      }}\r\n                    >\r\n                      Сохранить\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              );\r\n            } else {\r\n              return (\r\n                <div key={participantId} className='qual_info'>\r\n                  <p>{participant.user.username}</p>\r\n                  <p>1 заезд: {participant.try1}</p>\r\n                  <p>2 заезд: {participant.try2}</p>\r\n                </div>\r\n              );\r\n            }\r\n          })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TournamentPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}